{% assign is_homepage = request.page_type == 'index' %}
{% assign logo_alt = settings.logo.alt | default: shop.name | escape %}
{% assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio %}
{% assign logo_position = section.settings.logo_position %}

{% capture sizes %}
  {% if logo_position == 'middle-center' %}
    (min-width: 750px) {{ settings.logo_width }}px, 50vw
  {% else %}
    (max-width: {{ settings.logo_width | times: 2 }}px) 50vw, {{ settings.logo_width }}px
  {% endif %}
{% endcapture %}

{% capture widths %}
  {{ settings.logo_width }}, {{ settings.logo_width | times: 1.5 | round }}, {{ settings.logo_width | times: 2 }}
{% endcapture %}

{% if is_homepage %}<h1 class="header__heading">{% endif %}
<a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset" aria-label="{{ shop.name }}">
  {% if settings.logo != blank %}
    <div class="header__heading-logo-wrapper">
      {{
        settings.logo
        | image_url: width: 600
        | image_tag: 
            class: 'header__heading-logo motion-reduce',
            widths: widths,
            height: logo_height,
            width: settings.logo_width,
            alt: logo_alt,
            sizes: sizes,
            preload: true
      }}
    </div>
  {% else %}
    <span class="h2">{{ shop.name }}</span>
  {% endif %}
</a>
{% if is_homepage %}</h1>{% endif %}
